{
    "config": {
        "service_url": "PETASCOPE_URL",
        "tmp_directory": "/tmp/",
        "mock": false,
        "automated": true,
        "track_files": false,
        "skip": false
    },
    "input": {
        "coverage_id": "test_wcps_areas_of_validity_with_gaps",
        "paths": [
            "20010101_warped.tif",
            "20030101_warped.tif",
            "20050101_warped.tif",
            "20090101_warped.tif",            
            "20110101_warped.tif",
            "20130101_warped.tif",
            "20150101_warped.tif"    
        ]
    },
    "recipe": {
        "name": "general_coverage",
        "options": {
            "coverage": {
                "crs": "OGC/0/AnsiDate@EPSG/0/4326",
                "metadata": {
                    "type": "json",
                    "global": { "aas": "Asd222asd"}                  
                },
                "slicer": {
                    "type": "gdal",
                    "axes": {
                        "ansi": {
                            "statements": "from datetime import datetime, timedelta; from dateutil.relativedelta import relativedelta",
                            "min": "datetime.strptime(regex_extract('${file:name}', '(.*)_(.*).tif', 1), '%Y%m%d').isoformat()",
                            "areasOfValidity": [
                                {
                                    "start": "2000-06-01",
                                    "end": "2001-06-01"
                                },
                                {
                                    "start": "2002-06-01",
                                    "end": "2003-06-01"
                                },
                                {
                                    "start": "2004-06-01",
                                    "end": "2005-06-01"
                                },
                                {
                                    "start": "2008-06-01",
                                    "end": "2009-06-01"
                                },
                                {
                                    "start": "2010-06-01",
                                    "end": "2011-06-01"
                                },
                                {
                                    "start": "2012-06-01",
                                    "end": "2013-06-01"
                                },
                                {
                                    "start": "2014-06-01",
                                    "end": "2015-06-01"
                                }                 
                                ],
                            "dataBound": false,
                            "irregular": true
                        },
                        "Long": {
                            "min": "${gdal:minX}",
                            "max": "${gdal:maxX}",
                            "resolution": "${gdal:resolutionX}"
                        },
                        "Lat": {
                            "min": "${gdal:minY}",
                            "max": "${gdal:maxY}",
                            "resolution": "${gdal:resolutionY}"
                        }
                    }
                }
            },
            "wms_import": true,
            "tiling": "ALIGNED [0:0, 0:500, 0:500]"
        }
    }
}
